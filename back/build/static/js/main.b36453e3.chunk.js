(this.webpackJsonpfront=this.webpackJsonpfront||[]).push([[0],{32:function(e,t,a){e.exports=a(43)},37:function(e,t,a){},38:function(e,t,a){},42:function(e,t,a){},43:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(12),o=a.n(l),c=(a(37),a(24)),i=a(25),u=a(31),s=a(30),m=(a(38),a(6)),d=a(46),h=a(47),b=a(7);function p(e){var t=Object(n.useState)(""),a=Object(m.a)(t,2),l=a[0],o=a[1],c=Object(n.useState)([]),i=Object(m.a)(c,2),u=i[0],s=i[1];Object(n.useEffect)((function(){fetch(b.serverURL+"/api/getWriters").then((function(e){return e.json()})).then((function(e){s(e),o(e[0])}))}),[]);var p=Object(n.useState)(""),f=Object(m.a)(p,2),E=f[0],v=f[1];return r.a.createElement(d.a,{onSubmit:function(t){fetch(b.serverURL+"/api/addBook",{method:"POST",headers:{"Content-type":"application/json"},body:JSON.stringify({writer:l,title:E})}).then((function(t){return e.update()})),t.preventDefault();var a={title:E,select:l};console.log(a)}},r.a.createElement(d.a.Group,null,r.a.createElement("h3",null,"Add a book"),r.a.createElement(d.a.Label,null,"Book Title"),r.a.createElement(d.a.Control,{type:"text",placeholder:"Enter book title",value:E,onChange:function(e){return v(e.target.value)},maxLength:"19"})),r.a.createElement(d.a.Group,null,r.a.createElement(d.a.Label,null,"Author"),r.a.createElement(d.a.Control,{as:"select",onChange:function(e){return o(e.target.value)}},u.map((function(e,t){return r.a.createElement("option",{key:t},e)})))),r.a.createElement(h.a,{variant:"primary",type:"submit"},"Submit"))}function f(e){var t=Object(n.useState)(""),a=Object(m.a)(t,2),l=a[0],o=a[1],c=Object(n.useState)(""),i=Object(m.a)(c,2),u=i[0],s=i[1],p=Object(n.useState)(0),f=Object(m.a)(p,2),E=f[0],v=f[1],g=Object(n.useState)("Male"),y=Object(m.a)(g,2),k=y[0],j=y[1];return r.a.createElement(d.a,{onSubmit:function(t){var a={name:l,surname:u,age:E,sex:k};fetch(b.serverURL+"/api/addReader",{method:"POST",headers:{"Content-type":"application/json"},body:JSON.stringify(a)}).then((function(t){return e.updateReaders()})),console.log(a)}},r.a.createElement("h3",null,"Add a reader"),r.a.createElement(d.a.Group,null,r.a.createElement(d.a.Label,null,"Name"),r.a.createElement(d.a.Control,{type:"text",placeholder:"Enter name",value:l,onChange:function(e){return o(e.target.value)},maxLength:"19"})),r.a.createElement(d.a.Group,null,r.a.createElement(d.a.Label,null,"Surname"),r.a.createElement(d.a.Control,{type:"text",placeholder:"Enter surname",value:u,onChange:function(e){return s(e.target.value)},maxLength:"19"})),r.a.createElement(d.a.Group,null,r.a.createElement(d.a.Label,null,"Age"),r.a.createElement(d.a.Control,{type:"number",value:E,onChange:function(e){return v(e.target.value)}})),r.a.createElement(d.a.Group,null,r.a.createElement(d.a.Label,null,"Sex"),r.a.createElement(d.a.Control,{as:"select",onChange:function(e){return j(e.target.value)}},r.a.createElement("option",null,"Male"),r.a.createElement("option",null,"Female"))),r.a.createElement(h.a,{variant:"primary",type:"submit"},"Submit"))}function E(e){var t=Object(n.useState)(0),a=Object(m.a)(t,2),l=a[0],o=a[1];return r.a.createElement(d.a,{onSubmit:function(t){t.preventDefault();var a={number:l};console.log(a),fetch("".concat(b.serverURL,"/api/addBooks/").concat(l),{method:"POST"}).then((function(t){return e.update()}))}},r.a.createElement("h3",null,"Add a books"),r.a.createElement(d.a.Group,null,r.a.createElement(d.a.Label,null,"Number of books"),r.a.createElement(d.a.Control,{type:"number",placeholder:"Enter number of books",value:l,onChange:function(e){return o(e.target.value)}})),r.a.createElement(h.a,{variant:"primary",type:"submit"},"Submit"))}var v=a(45);function g(e){var t=Object(n.useState)(!1),a=Object(m.a)(t,2),l=a[0],o=a[1],c=Object(n.useState)(!1),i=Object(m.a)(c,2),u=i[0],s=i[1];Object(n.useEffect)((function(){fetch(b.serverURL+"/api/getWriters").then((function(e){return e.json()})).then((function(e){C(e[0]),T(e)}))}),[]);var p=function(){if(u){var t=L.split(" ");fetch(b.serverURL+"/api/finder/?table=Writers&name=".concat(t[0],"&surname=").concat(t[1],"&clear=true")).then((function(e){return e.json()})).then((function(t){console.log(t),!0===t?(y("Deleted successful"),e.update()):y("Something went wrong"),o(!0)})),s(!1),e.update()}else o(!1);s(!1)},f=Object(n.useState)(""),E=Object(m.a)(f,2),g=E[0],y=E[1],k=Object(n.useState)(""),j=Object(m.a)(k,2),S=j[0],O=j[1],D=Object(n.useState)(""),I=Object(m.a)(D,2),L=I[0],C=I[1],x=Object(n.useState)([]),w=Object(m.a)(x,2),N=w[0],T=w[1],G=Object(n.useState)(["Get available books","Get readers","Get books by title","Get writers","Delete writer"]),R=Object(m.a)(G,1)[0],H=Object(n.useState)(R[0]),B=Object(m.a)(H,2),U=B[0],M=B[1],z={"Get available books":"/api/finder?table=Books&input=","Get readers":"/api/finder?table=Readers","Get books by title":"/api/finder?table=Books&input=".concat(S),"Get writers":"/api/finder?table=Writers"};return r.a.createElement(r.a.Fragment,null,r.a.createElement(d.a,{onSubmit:function(t){if(t.preventDefault(),"Delete writer"===U){console.log(U,L);var a=L.split(" ");console.log(a[0]),fetch(b.serverURL+"/api/finder/?table=Writers&name=".concat(a[0],"&surname=").concat(a[1],"&clear=false")).then((function(e){return e.json()})).then((function(t){!0===t.delete?(y("Deleted successful"),e.update()):(y("This writer have books in library. Do you want delete this books too?"),s(!0)),o(!0)}))}else fetch(b.serverURL+z[U]).then((function(e){return e.json()})).then((function(t){console.log(t),e.updateModal(t)}))}},r.a.createElement("h3",null,"Finder"),r.a.createElement(d.a.Group,null,r.a.createElement(d.a.Label,null,"Text"),"Get books by title"===U?r.a.createElement(d.a.Control,{type:"text",placeholder:"Enter text",value:S,onChange:function(e){return O(e.target.value)}}):r.a.createElement(d.a.Control,{type:"text",placeholder:"Enter text",value:S,onChange:function(e){return O(e.target.value)},disabled:!0})),r.a.createElement(d.a.Group,null,r.a.createElement(d.a.Label,null,"Text"),"Delete writer"===U?r.a.createElement(d.a.Control,{as:"select",value:L,onChange:function(e){return C(e.target.value)}},N.map((function(e,t){return r.a.createElement("option",{key:t},e)}))):r.a.createElement(d.a.Control,{as:"select",value:L,disabled:!0,onChange:function(e){return M(e.target.value)}},N.map((function(e,t){return r.a.createElement("option",{key:t},e)})))),r.a.createElement(d.a.Group,null,r.a.createElement(d.a.Label,null,"Column"),r.a.createElement(d.a.Control,{as:"select",onChange:function(e){return M(e.target.value)}},R.map((function(e,t){return r.a.createElement("option",{key:t},e)})))),r.a.createElement(h.a,{variant:"primary",type:"submit"},"Submit")),r.a.createElement(v.a,{show:l,onHide:p},r.a.createElement(v.a.Header,{closeButton:!0},r.a.createElement(v.a.Title,null,"Deleting")),r.a.createElement(v.a.Body,null,g),r.a.createElement(v.a.Footer,null,r.a.createElement(h.a,{variant:"secondary",onClick:p},"No"),r.a.createElement(h.a,{variant:"primary",onClick:p},"Yes"))))}function y(e){var t=Object(n.useState)(0),a=Object(m.a)(t,2),l=a[0],o=a[1];return r.a.createElement(d.a,{onSubmit:function(t){t.preventDefault(),fetch("".concat(b.serverURL,"/api/deleteBook/").concat(l),{method:"DELETE"}).then((function(t){return e.update()}))}},r.a.createElement("h3",null,"Remove a book"),r.a.createElement(d.a.Group,null,r.a.createElement(d.a.Label,null,"BookID"),r.a.createElement(d.a.Control,{type:"number",placeholder:"Enter BookID",value:l,onChange:function(e){return o(e.target.value)}})),r.a.createElement(h.a,{variant:"primary",type:"submit"},"Submit"))}function k(e){var t=Object(n.useState)(["hello"]),a=Object(m.a)(t,2),l=a[0],o=a[1],c=Object(n.useState)(["hello"]),i=Object(m.a)(c,2),u=i[0],s=i[1],p=Object(n.useState)(""),f=Object(m.a)(p,2),E=f[0],v=f[1],g=Object(n.useState)(""),y=Object(m.a)(g,2),k=y[0],j=y[1];Object(n.useEffect)((function(){fetch(b.serverURL+"/api/getFreeTitles").then((function(e){return e.json()})).then((function(e){o(e),v(e[0])})),fetch(b.serverURL+"/api/getReaders").then((function(e){return e.json()})).then((function(e){s(e),j(e[0])}))}),[]);return r.a.createElement(d.a,{onSubmit:function(t){t.preventDefault(),fetch(b.serverURL+"/api/takeBook",{method:"PUT",headers:{"Content-type":"application/json"},body:JSON.stringify({holder:k,title:E})}).then((function(t){return e.update()}))}},r.a.createElement("h3",null,"Take a book"),r.a.createElement(d.a.Group,null,r.a.createElement(d.a.Label,null,"Title"),r.a.createElement(d.a.Control,{as:"select",onChange:function(e){return v(e.target.value)}},l.map((function(e,t){return r.a.createElement("option",{key:t},e)})))),r.a.createElement(d.a.Group,null,r.a.createElement(d.a.Label,null,"Reader"),r.a.createElement(d.a.Control,{as:"select",onChange:function(e){return j(e.target.value)}},u.map((function(e,t){return r.a.createElement("option",{key:t},e)})))),r.a.createElement(h.a,{variant:"primary",type:"submit"},"Submit"))}a(42);function j(e){var t=function(){var t=1,a=0;return e.books.forEach((function(e,n){Object.keys(e).length>t&&(t=Object.keys(e).length,a=n)})),{length:t,maxIndex:a}}();return r.a.createElement("div",{className:"booksTable"},r.a.createElement("header",{className:"bg-dark"},r.a.createElement("h4",null,"Library")),r.a.createElement("div",{className:"books"},r.a.createElement("header",{style:{paddingRight:"15px"}},Object.keys(e.books[t.maxIndex]).map((function(e,a){return r.a.createElement("p",{style:{width:1/t.length*100+"%"},key:a},e.toUpperCase())}))),r.a.createElement("div",{className:"booksBody"},e.books.map((function(e,a){return r.a.createElement("div",{className:"line",key:a},Object.values(e).map((function(e,a){return r.a.createElement("p",{key:a,style:{width:1/t.length*100+"%"}},e)})))})))))}function S(e){var t=function(){var t=1,a=0;return e.modalTable.forEach((function(e,n){Object.keys(e).length>t&&(t=Object.keys(e).length,a=n)})),{length:t,maxIndex:a}}();return r.a.createElement(v.a,{size:"xl",show:e.show,onHide:e.onHide},r.a.createElement(v.a.Header,{closeButton:!0},r.a.createElement(v.a.Title,null,"Finder")),r.a.createElement(v.a.Body,null,r.a.createElement("div",{className:"booksTable"},r.a.createElement("header",{className:"bg-dark"},r.a.createElement("h4",null,"Library")),r.a.createElement("div",{className:"books"},r.a.createElement("header",{style:{paddingRight:"15px"}},Object.keys(e.modalTable[t.maxIndex]).map((function(a,n){return r.a.createElement("p",{style:{width:1/Object.keys(e.modalTable[t.maxIndex]).length*100+"%"},key:n},a.toUpperCase())}))),r.a.createElement("div",{className:"booksBody"},e.modalTable.map((function(e,a){return r.a.createElement("div",{className:"line",key:a},Object.values(e).map((function(e,a){return r.a.createElement("p",{key:a,style:{width:1/t.length*100+"%"}},e)})))})))))),r.a.createElement(v.a.Footer,null,r.a.createElement(h.a,{variant:"primary",onClick:e.onHide},"Ok")))}var O=function(e){Object(u.a)(a,e);var t=Object(s.a)(a);function a(){var e;return Object(c.a)(this,a),(e=t.call(this)).state={modal:!1,library:[{ID:10,authorID:4,title:"Shining",bookHolderID:8},{ID:10,authorID:4,title:"Shining",bookHolderID:8},{ID:10,authorID:4,title:"Shining",bookHolderID:8},{ID:10,authorID:4,title:"Shining",bookHolderID:8},{ID:10,authorID:4,title:"Shining",bookHolderID:8,hello:"hello"},{ID:10,authorID:4,title:"Shining",bookHolderID:8},{ID:10,authorID:4,title:"Shining",bookHolderID:8},{ID:10,authorID:4,title:"Shining",bookHolderID:8}],modalTable:[{ID:10,authorID:4,title:"Shining",bookHolderID:8},{ID:10,authorID:4,title:"Shining",bookHolderID:8,hello:"hello"},{ID:10,authorID:4,title:"Shining",bookHolderID:8},{ID:10,authorID:4,title:"Shining",bookHolderID:8},{ID:10,authorID:4,title:"Shining",bookHolderID:8}]},e}return Object(i.a)(a,[{key:"handleCloseModal",value:function(){this.setState({modal:!1})}},{key:"handleOpenModal",value:function(){this.setState({modal:!0})}},{key:"updateModal",value:function(e){console.log(e.length),e.map((function(e){return e.authors&&(e.authors=e.authors.join(" and ")),void 0!==e.holder&&null===e.holder&&(e.holder="Book in library"),!0!==e.alive&&!1!==e.alive||(e.alive="".concat(e.alive)),e.expiredin&&(e.expiredin=new Date(e.expiredin).toLocaleDateString()),e})),0===e.length?this.setState({modalTable:[{found:"Not found"}]}):this.setState({modalTable:e}),this.handleOpenModal()}},{key:"componentDidMount",value:function(){this.updateLibrary()}},{key:"updateLibrary",value:function(){var e=this;fetch(b.serverURL+"/api/getBooks").then((function(e){return e.json()})).then((function(t){t.map((function(e){return null===e.holder&&(e.holder=new Array("Book in library")),e.authors=e.authors.join(" and "),e})),0!==t.length?e.setState({library:t}):e.setState({library:[{found:"Not found"}]})}))}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(S,{show:this.state.modal,onHide:this.handleCloseModal.bind(this),modalTable:this.state.modalTable}),r.a.createElement("div",{className:"App"},r.a.createElement("h3",null,"Lab2 KV-83 Hleb Vladyslav"),r.a.createElement("div",{className:"forms"},r.a.createElement("div",{className:"fullSize form"},r.a.createElement(f,{update:this.updateLibrary.bind(this)})),r.a.createElement("div",{className:"fullSize form"},r.a.createElement(p,{update:this.updateLibrary.bind(this)})),r.a.createElement("div",{className:"halfSize form"},r.a.createElement("div",{className:"fullSize inner"},r.a.createElement(E,{update:this.updateLibrary.bind(this)})),r.a.createElement("div",{className:"fullSize inner"},r.a.createElement(g,{update:this.updateLibrary.bind(this),updateModal:this.updateModal.bind(this)}))),r.a.createElement("div",{className:"halfSize form"},r.a.createElement("div",{className:"fullSize inner"},r.a.createElement(k,{update:this.updateLibrary.bind(this)})),r.a.createElement("div",{className:"fullSize inner"},r.a.createElement(y,{update:this.updateLibrary.bind(this)})))),r.a.createElement(j,{books:this.state.library})))}}]),a}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(O,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},7:function(e,t){e.exports={serverURL:"http://localhost:8000"}}},[[32,1,2]]]);
//# sourceMappingURL=main.b36453e3.chunk.js.map